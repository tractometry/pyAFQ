

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Defining Custom Bundle Dictionaries &#8212; AFQ 2.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/bundledict';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Major Fiber Tracts" href="fibertracts.html" />
    <link rel="prev" title="AFQ.registration" href="api/AFQ/registration/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="AFQ 2.1 documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="AFQ 2.1 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guides_index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developing/index.html">
    Developing pyAFQ
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bib.html">
    Bibliography
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api/index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/tractometry/pyAFQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guides_index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developing/index.html">
    Developing pyAFQ
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../bib.html">
    Bibliography
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="api/index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/tractometry/pyAFQ" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Getting started with pyAFQ</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/tutorial_examples/index.html">Tutorials: getting started with the pyAFQ Python library</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_001_group_afq_api.html">Getting started with pyAFQ - GroupAFQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_002_participant_afq_api.html">Getting started with pyAFQ - ParticipantAFQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_003_rerun.html">Re-running pyAFQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_004_export.html">Exporting pyAFQ Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_005_viz.html">Visualizing AFQ derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_006_bids_layout.html">How pyAFQ uses BIDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/tutorial_examples/plot_007_rois.html">Plotting Default Regions of Interest (ROIs) to Understand the Tracts</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howto/index.html">How To</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto/installation_guide.html">How to install <code class="docutils literal notranslate"><span class="pre">pyAFQ</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/getting_help.html">How to get help using pyAFQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/cite.html">How to cite our work</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/data.html">Organizing your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/rerun.html">Re-running pyAFQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/scalars.html">How to add custom tissue properties from another pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/converter.html">Tractography from other pipelines</a></li>

<li class="toctree-l2"><a class="reference internal" href="../howto/docker.html">The pyAFQ docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/singularity.html">The pyAFQ singularity image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/image.html">The pyAFQ Image API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/tractography_params.html">Tractography Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/segmentation_params.html">Segmentation Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/cleaning_params.html">Cleaning Parameters</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../howto/howto_examples/index.html">How to examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/acoustic_radiations.html">How to add new bundles into pyAFQ (Acoustic Radiations Example)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/add_custom_bundle.html">How to add new bundles into pyAFQ (SLF 1/2/3 Example)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/baby_afq.html">BabyAFQ : tractometry for infant dMRI data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/cerebellar_peduncles.html">Delineating cerebellar peduncles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/cloudknot_example.html">Using cloudknot to run pyAFQ on AWS batch:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/cloudknot_hcp_example.html">AFQ with HCP data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/optic_radiations.html">How to add new bundles into pyAFQ(Optic Radiations Example)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/plot_afq_callosal.html">Callosal bundles using AFQ API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/plot_recobundles.html">Using RecoBundles for bundle recognition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/plot_stages_of_tractometry.html">Understanding the different stages of tractometry with videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/run_afq_fwdti.html">How to use Free water DTI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/run_pyAFQ_with_GPU.html">Running pyAFQ using the GPU for tractography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/use_subject_space_rois_from_freesurfer.html">Using Subject Space ROIs from Freesurfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/howto_examples/vof_example.html">How to segment out only some bundles</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../explanations/index.html">Explanations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../explanations/tractometry_pipeline.html">AFQ Tractometry Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/bundle_orientation.html">Bundle Orientation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/modeling.html">Modeling White Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/profiling.html">Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/recognition.html">Bundle Recognition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanations/tractography.html">Tractography</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Reference Documentation</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/AFQ/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/api/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.api</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/data/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/definitions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.definitions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/models/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.models</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/recognition/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.recognition</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/tasks/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.tasks</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/tractography/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.tractography</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/utils/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.utils</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/viz/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.viz</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/AFQ/registration/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.registration</span></code></a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Defining Custom Bundle Dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="fibertracts.html">Major Fiber Tracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="tissue_properties.html">Tissue Properties in pyAFQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">The pyAFQ API methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="viz_backend.html">Visualization Backends</a></li>

<li class="toctree-l2"><a class="reference internal" href="mapping.html">The pyAFQ Mapping API</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">The pyAFQ configuration file</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guides_index.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Reference Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Defining...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="section" id="defining-custom-bundle-dictionaries">
<span id="bundle-dict-label"></span><h1>Defining Custom Bundle Dictionaries<a class="headerlink" href="#defining-custom-bundle-dictionaries" title="Permalink to this heading">#</a></h1>
<p>pyAFQ has a system for defining custom bundles. Custom bundles are defined
by passing a custom <cite>bundle_info</cite> dictionary to
<a class="reference internal" href="api/AFQ/api/bundle_dict/index.html#AFQ.api.bundle_dict.BundleDict" title="AFQ.api.bundle_dict.BundleDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFQ.api.bundle_dict.BundleDict</span></code></a>: The keys of <cite>bundle_info</cite> are bundle
names; the values are another dictionary describing the bundle, with these
key-value pairs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="s1">&#39;include&#39;</span> <span class="p">:</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">paths</span> <span class="n">to</span> <span class="n">Nifti</span> <span class="n">files</span> <span class="n">containing</span> <span class="n">inclusion</span> <span class="n">ROI</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span>
  <span class="n">One</span> <span class="n">must</span> <span class="n">either</span> <span class="n">have</span> <span class="n">at</span> <span class="n">least</span> <span class="mi">1</span> <span class="n">include</span> <span class="n">ROI</span><span class="p">,</span> <span class="ow">or</span> <span class="s1">&#39;start&#39;</span> <span class="ow">or</span> <span class="s1">&#39;end&#39;</span> <span class="n">ROIs</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;exclude&#39;</span> <span class="p">:</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">paths</span> <span class="n">to</span> <span class="n">Nifti</span> <span class="n">files</span> <span class="n">containing</span> <span class="n">exclusion</span> <span class="n">ROI</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
  <span class="n">optional</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;start&#39;</span> <span class="p">:</span> <span class="n">path</span> <span class="n">to</span> <span class="n">a</span> <span class="n">Nifti</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">start</span> <span class="n">ROI</span><span class="p">,</span> <span class="n">optional</span>
<span class="o">-</span> <span class="s1">&#39;end&#39;</span> <span class="p">:</span> <span class="n">path</span> <span class="n">to</span> <span class="n">a</span> <span class="n">Nifti</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">end</span> <span class="n">ROI</span><span class="p">,</span> <span class="n">optional</span>
<span class="o">-</span> <span class="s1">&#39;cross_midline&#39;</span> <span class="p">:</span> <span class="n">boolean</span> <span class="n">describing</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">bundle</span> <span class="ow">is</span> <span class="n">required</span> <span class="n">to</span>
  <span class="n">cross</span> <span class="n">the</span> <span class="n">midline</span> <span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="ow">or</span> <span class="n">prohibited</span> <span class="kn">from</span><span class="w"> </span><span class="nn">crossing</span> <span class="p">(</span><span class="kc">False</span><span class="p">),</span> <span class="n">optional</span><span class="o">.</span>
  <span class="n">If</span> <span class="kc">None</span><span class="p">,</span> <span class="n">the</span> <span class="n">bundle</span> <span class="n">may</span> <span class="ow">or</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">cross</span> <span class="n">the</span> <span class="n">midline</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;space&#39;</span> <span class="p">:</span> <span class="n">a</span> <span class="n">string</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">either</span> <span class="s1">&#39;template&#39;</span> <span class="ow">or</span> <span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="n">optional</span>
<span class="n">If</span> <span class="n">this</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">given</span> <span class="ow">or</span> <span class="s1">&#39;template&#39;</span> <span class="ow">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">the</span> <span class="n">ROI</span> <span class="n">will</span> <span class="n">be</span>
<span class="n">transformed</span> <span class="kn">from</span><span class="w"> </span><span class="nn">template</span> <span class="n">to</span> <span class="n">subject</span> <span class="n">space</span> <span class="n">before</span> <span class="n">being</span> <span class="n">used</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;prob_map&#39;</span> <span class="p">:</span> <span class="n">path</span> <span class="n">to</span> <span class="n">a</span> <span class="n">Nifti</span> <span class="n">file</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">probability</span> <span class="nb">map</span><span class="p">,</span>
  <span class="n">optional</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;inc_addtol&#39;</span> <span class="p">:</span> <span class="n">List</span> <span class="n">of</span> <span class="n">floats</span> <span class="n">describing</span> <span class="n">how</span> <span class="n">much</span> <span class="n">tolerance</span> <span class="n">to</span> <span class="n">add</span> <span class="ow">or</span>
  <span class="n">subtract</span> <span class="ow">in</span> <span class="n">mm</span> <span class="kn">from</span><span class="w"> </span><span class="nn">each</span> <span class="n">of</span> <span class="n">the</span> <span class="n">inclusion</span> <span class="n">ROIs</span><span class="o">.</span> <span class="n">The</span> <span class="nb">list</span> <span class="n">must</span> <span class="n">be</span> <span class="n">the</span>
  <span class="n">same</span> <span class="n">length</span> <span class="k">as</span> <span class="s1">&#39;include&#39;</span><span class="o">.</span> <span class="n">optional</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;exc_addtol&#39;</span> <span class="p">:</span> <span class="n">List</span> <span class="n">of</span> <span class="n">floats</span> <span class="n">describing</span> <span class="n">how</span> <span class="n">much</span> <span class="n">tolerance</span> <span class="n">to</span> <span class="n">add</span> <span class="ow">or</span>
  <span class="n">subtract</span> <span class="ow">in</span> <span class="n">mm</span> <span class="kn">from</span><span class="w"> </span><span class="nn">each</span> <span class="n">of</span> <span class="n">the</span> <span class="n">exclusion</span> <span class="n">ROIs</span><span class="o">.</span> <span class="n">The</span> <span class="nb">list</span> <span class="n">must</span> <span class="n">be</span> <span class="n">the</span>
  <span class="n">same</span> <span class="n">length</span> <span class="k">as</span> <span class="s1">&#39;exclude&#39;</span><span class="o">.</span> <span class="n">optional</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;mahal&#39;</span><span class="p">:</span> <span class="n">Dict</span> <span class="n">describing</span> <span class="n">the</span> <span class="n">parameters</span> <span class="k">for</span> <span class="n">cleaning</span><span class="o">.</span> <span class="n">By</span> <span class="n">default</span><span class="p">,</span> <span class="n">we</span>
  <span class="n">use</span> <span class="n">the</span> <span class="n">default</span> <span class="n">behavior</span> <span class="n">of</span> <span class="n">the</span> <span class="n">seg</span><span class="o">.</span><span class="n">clean_bundle</span> <span class="n">function</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;recobundles&#39;</span><span class="p">:</span> <span class="n">Dict</span> <span class="n">which</span> <span class="n">should</span> <span class="n">contain</span> <span class="n">an</span> <span class="s1">&#39;sl&#39;</span> <span class="n">key</span> <span class="ow">and</span> <span class="s1">&#39;centroid&#39;</span>
  <span class="n">key</span><span class="o">.</span> <span class="n">The</span> <span class="s1">&#39;sl&#39;</span> <span class="n">key</span> <span class="n">should</span> <span class="n">be</span> <span class="n">the</span> <span class="n">reference</span> <span class="n">streamline</span> <span class="ow">and</span> <span class="n">the</span> <span class="s1">&#39;centroid&#39;</span>
  <span class="n">key</span> <span class="n">should</span> <span class="n">be</span> <span class="n">the</span> <span class="n">centroid</span> <span class="n">threshold</span> <span class="k">for</span> <span class="n">Recobundles</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;qb_thresh&#39;</span><span class="p">:</span> <span class="n">Float</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">threshold</span> <span class="k">for</span> <span class="n">Quickbundles</span> <span class="n">cleaning</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;primary_axis&#39;</span><span class="p">:</span> <span class="n">string</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">primary</span> <span class="n">axis</span> <span class="n">the</span>
  <span class="n">bundle</span> <span class="n">should</span> <span class="n">travel</span> <span class="ow">in</span><span class="o">.</span> <span class="n">Can</span> <span class="n">be</span> <span class="n">one</span> <span class="n">of</span><span class="p">:</span> <span class="s1">&#39;L/R&#39;</span><span class="p">,</span> <span class="s1">&#39;P/A&#39;</span><span class="p">,</span> <span class="s1">&#39;I/S&#39;</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;primary_axis_percentage&#39;</span><span class="p">:</span> <span class="n">Used</span> <span class="k">with</span> <span class="n">primary_axis</span><span class="p">,</span> <span class="n">defines</span> <span class="n">what</span> <span class="n">fraction</span>
  <span class="n">of</span> <span class="n">a</span> <span class="n">streamlines</span> <span class="n">movement</span> <span class="n">should</span> <span class="n">be</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">primary</span> <span class="n">axis</span><span class="o">.</span>
<span class="o">-</span> <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="n">dicitonary</span> <span class="n">containing</span> <span class="s1">&#39;min_len&#39;</span> <span class="ow">and</span> <span class="s1">&#39;max_len&#39;</span>
</pre></div>
</div>
<p>When doing bundle recognition, streamlines are filtered out from the whole
tractography according to the series of steps defined in the bundle
dictionaries. Of course, no one bundle uses every step, but here is the order
of the steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Probability Maps</p></li>
<li><p>Crosses midline</p></li>
<li><p>Startpoint</p></li>
<li><p>Endpoint</p></li>
<li><p>Min and Max length</p></li>
<li><p>Primary axis</p></li>
<li><p>Include</p></li>
<li><p>Curvature</p></li>
<li><p>Exclude</p></li>
<li><p>Recobundles</p></li>
<li><p>Quickbundles Cleaning</p></li>
<li><p>Mahalanobis Cleaning</p></li>
</ol>
</div></blockquote>
<p>If a streamline passes all steps for a bundle, it is included in that bundle.
If a streamline passess all steps for multiple bundles, then a warning is
thrown and the tie goes to whichever bundle is first in the bundle dictionary.</p>
<p>If, for debugging purposes, you want to save out the streamlines
remaining after each step, set <cite>save_intermediates</cite> to a path in
<cite>segmentation_params</cite>. Then the streamlines will be saved out after each step
to that path. Only do this for one subject at a time.</p>
<p>Custom bundle definitions such as the OR, and the standard BundleDict can be
combined through addition. For an example, see
<a class="reference external" href="howto/howto_examples/optic_radiations.html">Plotting the Optic Radiations</a>.
Some tracts, such as the Vertical Occipital Fasciculus, may be defined relative
to other tracts. In those cases, the custom tract definitions should appear in the BundleDict
object after the reference tracts have been defined. These reference tracts can
be included as keys in the same dictionary for that tract. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newVOF</span> <span class="o">=</span> <span class="n">abd</span><span class="o">.</span><span class="n">BundleDict</span><span class="p">({</span>
             <span class="s1">&#39;Left Vertical Occipital&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;cross_midline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                 <span class="s1">&#39;space&#39;</span><span class="p">:</span> <span class="s1">&#39;template&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="n">templates</span><span class="p">[</span><span class="s1">&#39;VOF_L_start&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="n">templates</span><span class="p">[</span><span class="s1">&#39;VOF_L_end&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;inc_addtol&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                 <span class="s1">&#39;Left Arcuate&#39;</span><span class="p">:</span> <span class="p">{</span>
                                     <span class="s1">&#39;node_thresh&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
                                 <span class="s1">&#39;Left Posterior Arcuate&#39;</span><span class="p">:</span> <span class="p">{</span>
                                     <span class="s1">&#39;node_thresh&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                     <span class="s1">&#39;core&#39;</span><span class="p">:</span> <span class="s1">&#39;Posterior&#39;</span><span class="p">},</span>
                                 <span class="s1">&#39;Left Inferior Longitudinal&#39;</span><span class="p">:</span> <span class="p">{</span>
                                     <span class="s1">&#39;core&#39;</span><span class="p">:</span> <span class="s1">&#39;Left&#39;</span><span class="p">},</span>
                                 <span class="s1">&#39;primary_axis&#39;</span><span class="p">:</span> <span class="s1">&#39;I/S&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;primary_axis_percentage&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>
                         <span class="p">})</span>
</pre></div>
</div>
<p>This definition of the VOF in the custom BundleDict would first require left ARC, left pARC, and left ILF
to be defined, in the same way the tiebreaker above works. You would then construct your custom
BundleDict like this. The order of addition matters here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BundleDictCustomVOF</span> <span class="o">=</span> <span class="n">abd</span><span class="o">.</span><span class="n">default18_bd</span><span class="p">()</span> <span class="o">+</span> <span class="n">newVOF</span>
</pre></div>
</div>
</div>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="api/AFQ/registration/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">AFQ.registration</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="fibertracts.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Major Fiber Tracts</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/tractometry/pyAFQ/edit/master/docs/source/reference/bundledict.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/reference/bundledict.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>


  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2018--, The pyAFQ Contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="footer">
    <div class="footer-content">
      <div class="copyright">
        Please Cite the following paper:
      </div>
      <div class="citation">
        <a href="https://doi.org/10.52294/e6198273-b8e3-4b63-babb-6e6b0da10669">Kruper et al. (2021)</a>
      </div>
    </div>
  </div>
  </div>
      
    </div>
  
</div>

  </footer>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-156363454-2");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>